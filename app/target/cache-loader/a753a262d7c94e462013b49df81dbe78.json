{"remainingRequest":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\ts-loader\\index.js??ref--9-3!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\angular-router-loader\\src\\index.js!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\tslint-loader\\index.js!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\src\\main\\webapp\\app\\entities\\providencia\\providencia-detail.component.ts","dependencies":[{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\src\\main\\webapp\\app\\entities\\providencia\\providencia-detail.component.ts","mtime":1572998498976},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564750574678},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1564750573341},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\ts-loader\\index.js","mtime":1519365772000},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\angular-router-loader\\src\\index.js","mtime":1512749902000},{"path":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\tslint-loader\\index.js","mtime":1519899048000}],"contextDependencies":[],"result":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar core_1 = require(\"@angular/core\");\r\nvar router_1 = require(\"@angular/router\");\r\nvar ng_jhipster_1 = require(\"ng-jhipster\");\r\nvar providencia_service_1 = require(\"./providencia.service\");\r\nvar http_1 = require(\"@angular/common/http\");\r\nvar ProvidenciaDetailComponent = /** @class */ (function () {\r\n    function ProvidenciaDetailComponent(activatedRoute, jhiAlertService, providenciaService, router, http) {\r\n        // trabajando con descarga en formato excell\r\n        // this.providenciaService.query().subscribe(data => {\r\n        //     console.log('esta es la data: ', data);\r\n        //     data.body.forEach(row => {\r\n        //         this.excel.push(row);\r\n        //     });\r\n        // });\r\n        var _this = this;\r\n        this.activatedRoute = activatedRoute;\r\n        this.jhiAlertService = jhiAlertService;\r\n        this.providenciaService = providenciaService;\r\n        this.router = router;\r\n        this.http = http;\r\n        this.actionsPermitted = {\r\n            aceptar: false,\r\n            rechazar: false,\r\n            reply: false,\r\n            goBackwards: false,\r\n            watchTabRespuesta: true,\r\n            relacionarProvidencia: false,\r\n            asignarFiscal: false,\r\n            numerarReferencia: false,\r\n            tipoSolicitud: false,\r\n            prorroga: false,\r\n            apela: false,\r\n            noApela: false,\r\n            fiscalNotificaCierre: false,\r\n            inculpadoEnviaMemo: false,\r\n            inculpadoNoEnviaMemo: false\r\n        };\r\n        this.refresh = false;\r\n        this.isResponder = true;\r\n        this.isDevolver = true;\r\n        this.isRechazar = true;\r\n        this.isProrroga = true;\r\n        this.isNotificaCierre = true;\r\n        this.disableResponder = false;\r\n        this.excel = [];\r\n        this.navigationSubscription = this.router.events.subscribe(function (e) {\r\n            // Si es un evento NavigationEnd, volver a inicializar el componente\r\n            if (e instanceof router_1.NavigationEnd) {\r\n                if (_this.refresh) {\r\n                    _this.refreshDetail();\r\n                }\r\n                _this.refresh = true;\r\n            }\r\n        });\r\n    }\r\n    ProvidenciaDetailComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.activatedRoute.data.subscribe(function (_a) {\r\n            var providencia = _a.providencia;\r\n            _this.providencia = providencia;\r\n            console.log('cantidad Adjuntos', _this.providencia.totalAdjuntos);\r\n            // this.providencia.documentos.forEach(documento => {\r\n            //     if (documento.tipoPlantilla === 'RESOLUCION') {\r\n            //         console.log('puede continuar porque tiene el archivo correcto');\r\n            //     }\r\n            // });\r\n            _this.providenciaService.getActionsPermitted(_this.providencia).subscribe(function (response) {\r\n                _this.actionsPermitted = response.body;\r\n                // // condicion para que en el estado 6 condiciona la vista del btn asignar numero referencia\r\n                // if (this.providencia.estadoActual === 'ESTADO_3') {\r\n                //     if (this.providencia.numeroReferencia !== null && typeof this.providencia.numeroReferencia !== 'undefined') {\r\n                //         this.actionsPermitted.numerarReferencia = false;\r\n                //     } else {\r\n                //         this.actionsPermitted.numerarReferencia = true;\r\n                //     }\r\n                // }\r\n                // condicion para que en el estado 6 condiciona la vista del boton asignar tipo solicitud\r\n                // if (this.providencia.estadoActual === 'ESTADO_6') {\r\n                //     if (this.providencia.tipo !== null && typeof this.providencia.tipo !== 'undefined') {\r\n                //         this.actionsPermitted.tipoSolicitud = false;\r\n                //     } else {\r\n                //         this.actionsPermitted.tipoSolicitud = true;\r\n                //     }\r\n                // }\r\n                // condicion para que en el estado actual haga una accion\r\n                // 6, condiciona que si en contenido de la plantilla es nulo desactive el boton continuar\r\n                // 11, condiciona si el nombre del fiscal es nulo o indefinido desactive el boton continuar\r\n                // 14 condiciona la vista del btn continuar\r\n                switch (_this.providencia.estadoActual) {\r\n                    case 'RESOLUCION_Y_MEMO': {\r\n                        if (_this.plantillaUtilizada.contenido === null) {\r\n                            _this.disableResponder = true;\r\n                            _this.refresh = true;\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            // condicion para cuando se valla a continuar=(true) o aceptar=(false)\r\n            if (_this.providencia.requisito === 'FISCAL_NOTIFICADO' && _this.providencia.etapa === 'NUEVA_PROVIDENCIA') {\r\n                _this.isResponder = false;\r\n            }\r\n            // condicion para cuando se valla a devolver=(true) o rechazo=(false)\r\n            if (_this.providencia.requisito === 'FISCAL_NOTIFICADO' && _this.providencia.etapa === 'NUEVA_PROVIDENCIA') {\r\n                _this.isDevolver = false;\r\n            }\r\n            if (_this.providencia.etapa === 'PROVIDENCIA_PRORROGA') {\r\n                _this.isProrroga = false;\r\n            }\r\n        });\r\n    };\r\n    ProvidenciaDetailComponent.prototype.SeguirLeyendo = function (value, limit, trail) {\r\n        if (trail === void 0) { trail = '…'; }\r\n        var result = value || '';\r\n        if (value) {\r\n            var words = value.split(/\\s+/);\r\n            if (words.length > Math.abs(limit)) {\r\n                if (limit < 0) {\r\n                    limit *= -1;\r\n                    result = trail + words.slice(words.length - limit, words.length).join(' ');\r\n                }\r\n                else {\r\n                    result = words.slice(0, limit).join(' ') + trail;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    // complemento para descargar excel\r\n    ProvidenciaDetailComponent.prototype.exportAsXLSX = function () {\r\n        this.providenciaService.exportAsExcelFile(this.excel, 'sample');\r\n    };\r\n    ProvidenciaDetailComponent.prototype.getJSON = function () {\r\n        return this.http.get('https://api.myjson.com/bins/zg8of');\r\n    };\r\n    // metodo que refresca el detalle\r\n    ProvidenciaDetailComponent.prototype.refreshDetail = function () {\r\n        var _this = this;\r\n        this.providenciaService.find(this.providencia.id).subscribe(function (response) {\r\n            _this.providencia = response.body;\r\n        });\r\n    };\r\n    // metodo para volver atras\r\n    ProvidenciaDetailComponent.prototype.previousState = function () {\r\n        window.history.back();\r\n    };\r\n    ProvidenciaDetailComponent.prototype.onError = function (errorMessage) {\r\n        this.jhiAlertService.error(errorMessage, null, null);\r\n    };\r\n    ProvidenciaDetailComponent.prototype.getRespuesta = function ($event) {\r\n        this.respuesta = $event;\r\n        console.log('Respondiendo', this.respuesta);\r\n        // if (this.providencia.estadoActual === 'ESTADO_6') {\r\n        //\r\n        //     if (this.respuesta.documentos != null && this.respuesta.documentos.length >= 2) {\r\n        //\r\n        //         let countMemos = 0;\r\n        //         let countResoluciones = 0;\r\n        //\r\n        //         this.respuesta.documentos.forEach(doc => {\r\n        //             if (doc.tipoPlantilla === 'MEMORANDUM') {\r\n        //                 countMemos += 1;\r\n        //             } else if (doc.tipoPlantilla === 'RESOLUCION') {\r\n        //                 countResoluciones += 1;\r\n        //             }\r\n        //         });\r\n        //\r\n        //         if (countMemos > 0 && countResoluciones > 0) {\r\n        //             this.disableResponder = false;\r\n        //         }\r\n        //     } else {\r\n        //         this.disableResponder = true;\r\n        //     }\r\n        //\r\n        // } else if (this.providencia.estadoActual === 'ESTADO_16') {\r\n        //\r\n        //     if (this.respuesta.documentos != null && this.respuesta.documentos.length > 0) {\r\n        //\r\n        //         let countNotificaciones = 0;\r\n        //\r\n        //         this.respuesta.documentos.forEach(doc => {\r\n        //             if (doc.tipoPlantilla === 'NOTIFICACION') {\r\n        //                 countNotificaciones += 1;\r\n        //             }\r\n        //         });\r\n        //\r\n        //         if (countNotificaciones >= 1) {\r\n        //             this.disableResponder = false;\r\n        //         }\r\n        //     } else {\r\n        //         this.disableResponder = true;\r\n        //     }\r\n        // }\r\n    };\r\n    ProvidenciaDetailComponent.prototype.ngOnDestroy = function () {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    };\r\n    ProvidenciaDetailComponent = tslib_1.__decorate([\r\n        core_1.Component({\r\n            selector: 'jhi-providencia-detail',\r\n            templateUrl: './providencia-detail.component.html'\r\n        }),\r\n        tslib_1.__metadata(\"design:paramtypes\", [typeof (_a = typeof router_1.ActivatedRoute !== \"undefined\" && router_1.ActivatedRoute) === \"function\" && _a || Object, typeof (_b = typeof ng_jhipster_1.JhiAlertService !== \"undefined\" && ng_jhipster_1.JhiAlertService) === \"function\" && _b || Object, typeof (_c = typeof providencia_service_1.ProvidenciaService !== \"undefined\" && providencia_service_1.ProvidenciaService) === \"function\" && _c || Object, typeof (_d = typeof router_1.Router !== \"undefined\" && router_1.Router) === \"function\" && _d || Object, typeof (_e = typeof http_1.HttpClient !== \"undefined\" && http_1.HttpClient) === \"function\" && _e || Object])\r\n    ], ProvidenciaDetailComponent);\r\n    return ProvidenciaDetailComponent;\r\n    var _a, _b, _c, _d, _e;\r\n}());\r\nexports.ProvidenciaDetailComponent = ProvidenciaDetailComponent;\r\n",{"version":3,"file":"C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\src\\main\\webapp\\app\\entities\\providencia\\providencia-detail.component.ts","sourceRoot":"","sources":["C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\angular-router-loader\\src\\index.js!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\node_modules\\tslint-loader\\index.js!C:\\Users\\rbarrera\\Documents\\Proyectos\\ifyum\\app\\src\\main\\webapp\\app\\entities\\providencia\\providencia-detail.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component , OnDestroy , OnInit } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\n\r\nimport { IProvidencia } from 'app/shared/model/providencia.model';\r\n\r\nimport { JhiAlertService } from 'ng-jhipster';\r\nimport { IMovimientoProvidencia } from 'app/shared/model/movimiento-providencia.model';\r\nimport { ProvidenciaService } from './providencia.service';\r\nimport { IRespuesta } from '../../shared/model/respuesta.model';\r\nimport { IPlantilla } from 'app/shared/model/plantilla.model';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'jhi-providencia-detail',\r\n    templateUrl: './providencia-detail.component.html'\r\n})\r\nexport class ProvidenciaDetailComponent implements OnInit, OnDestroy {\r\n    providencia: IProvidencia;\r\n    plantillaUtilizada: IPlantilla;\r\n    movimientosProvidencia: IMovimientoProvidencia[];\r\n    actionsPermitted: any = {\r\n        aceptar: false,\r\n        rechazar: false,\r\n        reply: false,\r\n        goBackwards: false,\r\n        watchTabRespuesta: true,\r\n        relacionarProvidencia: false,\r\n        asignarFiscal: false,\r\n        numerarReferencia: false,\r\n        tipoSolicitud: false,\r\n        prorroga: false,\r\n        apela: false,\r\n        noApela: false,\r\n        fiscalNotificaCierre: false,\r\n        inculpadoEnviaMemo: false,\r\n        inculpadoNoEnviaMemo: false\r\n\r\n    };\r\n    refresh = false;\r\n    respuesta: IRespuesta;\r\n    isResponder = true;\r\n    isDevolver = true;\r\n    isRechazar = true;\r\n    isProrroga = true;\r\n    isNotificaCierre = true;\r\n    disableResponder = false;\r\n    navigationSubscription;\r\n    excel = [];\r\n\r\n    constructor(\r\n        private activatedRoute: ActivatedRoute,\r\n        private jhiAlertService: JhiAlertService,\r\n        private providenciaService: ProvidenciaService,\r\n        private router: Router,\r\n        private http: HttpClient\r\n    ) {\r\n        // trabajando con descarga en formato excell\r\n        // this.providenciaService.query().subscribe(data => {\r\n        //     console.log('esta es la data: ', data);\r\n        //     data.body.forEach(row => {\r\n        //         this.excel.push(row);\r\n        //     });\r\n        // });\r\n\r\n        this.navigationSubscription = this.router.events.subscribe ((e: any) => {\r\n            // Si es un evento NavigationEnd, volver a inicializar el componente\r\n            if (e instanceof NavigationEnd) {\r\n                if (this.refresh) {\r\n                    this.refreshDetail();\r\n                }\r\n                this.refresh = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.activatedRoute.data.subscribe(({ providencia }) => {\r\n            this.providencia = providencia;\r\n            console.log('cantidad Adjuntos', this.providencia.totalAdjuntos);\r\n\r\n            // this.providencia.documentos.forEach(documento => {\r\n            //     if (documento.tipoPlantilla === 'RESOLUCION') {\r\n            //         console.log('puede continuar porque tiene el archivo correcto');\r\n            //     }\r\n            // });\r\n            this.providenciaService.getActionsPermitted(this.providencia).subscribe(response => {\r\n                this.actionsPermitted = response.body;\r\n                // // condicion para que en el estado 6 condiciona la vista del btn asignar numero referencia\r\n                // if (this.providencia.estadoActual === 'ESTADO_3') {\r\n                //     if (this.providencia.numeroReferencia !== null && typeof this.providencia.numeroReferencia !== 'undefined') {\r\n                //         this.actionsPermitted.numerarReferencia = false;\r\n                //     } else {\r\n                //         this.actionsPermitted.numerarReferencia = true;\r\n                //     }\r\n                // }\r\n                // condicion para que en el estado 6 condiciona la vista del boton asignar tipo solicitud\r\n                // if (this.providencia.estadoActual === 'ESTADO_6') {\r\n                //     if (this.providencia.tipo !== null && typeof this.providencia.tipo !== 'undefined') {\r\n                //         this.actionsPermitted.tipoSolicitud = false;\r\n                //     } else {\r\n                //         this.actionsPermitted.tipoSolicitud = true;\r\n                //     }\r\n                // }\r\n\r\n                // condicion para que en el estado actual haga una accion\r\n                // 6, condiciona que si en contenido de la plantilla es nulo desactive el boton continuar\r\n                // 11, condiciona si el nombre del fiscal es nulo o indefinido desactive el boton continuar\r\n                // 14 condiciona la vista del btn continuar\r\n                switch (this.providencia.estadoActual) {\r\n                    case 'RESOLUCION_Y_MEMO': {\r\n                        if (this.plantillaUtilizada.contenido === null) {\r\n                            this.disableResponder = true;\r\n                            this.refresh = true;\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n                    // case 'ESTADO_11': {\r\n                    //     if (this.providencia.nombreFiscalAsignado === null || typeof this.providencia.nombreFiscalAsignado === 'undefined') {\r\n                    //         this.disableResponder = true;\r\n                    //     } else {\r\n                    //         this.actionsPermitted.asignarFiscal = false;\r\n                    //     }\r\n                    //     break;\r\n                    // }\r\n                    // case 'ESTADO_14': {\r\n                    //     this.disableResponder = true;\r\n                    //     break;\r\n                    // }\r\n                }\r\n\r\n            });\r\n            // condicion para cuando se valla a continuar=(true) o aceptar=(false)\r\n            if (this.providencia.requisito === 'FISCAL_NOTIFICADO' && this.providencia.etapa === 'NUEVA_PROVIDENCIA') {\r\n                this.isResponder = false;\r\n\r\n            }\r\n\r\n            // condicion para cuando se valla a devolver=(true) o rechazo=(false)\r\n\r\n            if (this.providencia.requisito === 'FISCAL_NOTIFICADO' && this.providencia.etapa === 'NUEVA_PROVIDENCIA') {\r\n                this.isDevolver = false;\r\n            }\r\n            if (this.providencia.etapa === 'PROVIDENCIA_PRORROGA' ) {\r\n                this.isProrroga = false;\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n    SeguirLeyendo(value: string, limit: 40, trail: String = '…'): string {\r\n        let result = value || '';\r\n\r\n        if (value) {\r\n            const words = value.split(/\\s+/);\r\n            if (words.length > Math.abs(limit)) {\r\n                if (limit < 0) {\r\n                    limit *= -1;\r\n                    result = trail + words.slice(words.length - limit, words.length).join(' ');\r\n                } else {\r\n                    result = words.slice(0, limit).join(' ') + trail;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    // complemento para descargar excel\r\n    exportAsXLSX(): void {\r\n        this.providenciaService.exportAsExcelFile(this.excel, 'sample');\r\n    }\r\n\r\n    public getJSON(): Observable<any> {\r\n        return this.http.get('https://api.myjson.com/bins/zg8of');\r\n    }\r\n\r\n    // metodo que refresca el detalle\r\n    refreshDetail() {\r\n        this.providenciaService.find(this.providencia.id).subscribe(response => {\r\n            this.providencia = response.body;\r\n        });\r\n    }\r\n    // metodo para volver atras\r\n    previousState() {\r\n        window.history.back();\r\n    }\r\n\r\n    private onError(errorMessage: string) {\r\n        this.jhiAlertService.error(errorMessage, null, null);\r\n    }\r\n\r\n    getRespuesta($event) {\r\n        this.respuesta = $event;\r\n\r\n        console.log('Respondiendo', this.respuesta);\r\n\r\n        // if (this.providencia.estadoActual === 'ESTADO_6') {\r\n        //\r\n        //     if (this.respuesta.documentos != null && this.respuesta.documentos.length >= 2) {\r\n        //\r\n        //         let countMemos = 0;\r\n        //         let countResoluciones = 0;\r\n        //\r\n        //         this.respuesta.documentos.forEach(doc => {\r\n        //             if (doc.tipoPlantilla === 'MEMORANDUM') {\r\n        //                 countMemos += 1;\r\n        //             } else if (doc.tipoPlantilla === 'RESOLUCION') {\r\n        //                 countResoluciones += 1;\r\n        //             }\r\n        //         });\r\n        //\r\n        //         if (countMemos > 0 && countResoluciones > 0) {\r\n        //             this.disableResponder = false;\r\n        //         }\r\n        //     } else {\r\n        //         this.disableResponder = true;\r\n        //     }\r\n        //\r\n        // } else if (this.providencia.estadoActual === 'ESTADO_16') {\r\n        //\r\n        //     if (this.respuesta.documentos != null && this.respuesta.documentos.length > 0) {\r\n        //\r\n        //         let countNotificaciones = 0;\r\n        //\r\n        //         this.respuesta.documentos.forEach(doc => {\r\n        //             if (doc.tipoPlantilla === 'NOTIFICACION') {\r\n        //                 countNotificaciones += 1;\r\n        //             }\r\n        //         });\r\n        //\r\n        //         if (countNotificaciones >= 1) {\r\n        //             this.disableResponder = false;\r\n        //         }\r\n        //     } else {\r\n        //         this.disableResponder = true;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n}\r\n"]}]}